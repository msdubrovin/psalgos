
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>psalgos documentation &#8212; psalgos-doc 1 documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head>
  <body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="#">psalgos-doc 1 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="psalgos-documentation">
<h1>psalgos documentation<a class="headerlink" href="#psalgos-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<span class="target" id="module-pypsalgos"></span><p>Created on 2017-08-10 by Mikhail Dubrovin</p>
<p>Class provides access to C++ algorithms from python.</p>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># IMPORT MISC</span>
<span class="c1"># ===========</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">pyimgalgos.GlobalUtils</span> <span class="k">import</span> <span class="n">print_ndarr</span>

<span class="c1"># INPUT PARAMETERS</span>
<span class="c1"># ================</span>

<span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">32</span><span class="p">,</span><span class="mi">185</span><span class="p">,</span><span class="mi">388</span><span class="p">)</span> <span class="c1"># e.g.</span>
<span class="n">ave</span><span class="p">,</span> <span class="n">rms</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">25</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ave</span> <span class="o">+</span> <span class="n">rms</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="n">shape</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">double</span><span class="p">)</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">)</span>

<span class="c1">#mask = det.mask()             # see class Detector.PyDetector</span>
<span class="c1">#mask = np.loadtxt(fname_mask) # </span>

<span class="c1"># 2-D IMAGE using cython object directly</span>
<span class="c1"># ======================================</span>

<span class="kn">import</span> <span class="nn">psalgos</span>

<span class="n">alg</span> <span class="o">=</span> <span class="n">psalgos</span><span class="o">.</span><span class="n">peak_finder_algos</span><span class="p">(</span><span class="n">seg</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">alg</span><span class="o">.</span><span class="n">set_peak_selection_parameters</span><span class="p">(</span><span class="n">npix_min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">npix_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">amax_thr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">atot_thr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">son_min</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

<span class="n">peaks</span> <span class="o">=</span> <span class="n">alg</span><span class="o">.</span><span class="n">peak_finder_v3r3_d2</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">r0</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">dr</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">nsigm</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">peaks</span> <span class="o">=</span> <span class="n">alg</span><span class="o">.</span><span class="n">peak_finder_v4r3_d2</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">thr_low</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">thr_high</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">r0</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">dr</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">peaks</span> <span class="o">=</span> <span class="n">alg</span><span class="o">.</span><span class="n">list_of_peaks_selected</span><span class="p">()</span>
<span class="n">peaks_all</span> <span class="o">=</span> <span class="n">alg</span><span class="o">.</span><span class="n">list_of_peaks</span><span class="p">()</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">algo</span><span class="o">.</span><span class="n">peak</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">algo</span><span class="o">.</span><span class="n">peak_selected</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">peaks</span> <span class="p">:</span> <span class="nb">print</span> <span class="s1">&#39;  row:</span><span class="si">%4d</span><span class="s1">, col:</span><span class="si">%4d</span><span class="s1">, npix:</span><span class="si">%4d</span><span class="s1">, son::</span><span class="si">%4.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">row</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">col</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">npix</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">son</span><span class="p">)</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">peaks</span> <span class="p">:</span> <span class="nb">print</span> <span class="n">p</span><span class="o">.</span><span class="n">parameters</span><span class="p">()</span>

<span class="n">map_u2</span> <span class="o">=</span> <span class="n">alg</span><span class="o">.</span><span class="n">local_maxima</span><span class="p">()</span>
<span class="n">map_u2</span> <span class="o">=</span> <span class="n">alg</span><span class="o">.</span><span class="n">local_minima</span><span class="p">()</span>
<span class="n">map_u4</span> <span class="o">=</span> <span class="n">alg</span><span class="o">.</span><span class="n">connected_pixels</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">psalgos.pypsalgos</span> <span class="k">as</span> <span class="nn">algos</span>

<span class="n">n</span> <span class="o">=</span> <span class="n">algos</span><span class="o">.</span><span class="n">local_minima_2d</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">rank</span><span class="p">,</span> <span class="n">extrema</span><span class="p">)</span> <span class="c1"># 0.019(sec) for shape=(1000, 1000) on psanaphi110</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">algos</span><span class="o">.</span><span class="n">local_maxima_2d</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">rank</span><span class="p">,</span> <span class="n">extrema</span><span class="p">)</span> <span class="c1"># 0.019(sec)</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">algos</span><span class="o">.</span><span class="n">local_maxima_rank1_cross_2d</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">extrema</span><span class="p">)</span> <span class="c1"># 0.014(sec)</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">algos</span><span class="o">.</span><span class="n">threshold_maxima_2d</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">rank</span><span class="p">,</span> <span class="n">thr_low</span><span class="p">,</span> <span class="n">thr_high</span><span class="p">,</span> <span class="n">extrema</span><span class="p">)</span> <span class="c1"># 0.0017(sec)</span>

<span class="c1"># DIRECT CALL PEAKFINDERS</span>
<span class="c1"># =======================</span>

<span class="kn">from</span> <span class="nn">psalgos.pypsalgos</span> <span class="k">import</span> <span class="n">peaks_adaptive</span><span class="p">,</span> <span class="n">peaks_droplet</span><span class="p">,</span> <span class="n">peaks_adaptive_2d</span><span class="p">,</span> <span class="n">peaks_droplet_2d</span>

<span class="c1"># data and mask are 2-d numpy arrays of the same shape    </span>
<span class="n">peaks</span> <span class="o">=</span> <span class="n">peaks_adaptive_2d</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">r0</span><span class="o">=</span><span class="mf">7.0</span><span class="p">,</span> <span class="n">dr</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">nsigm</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">seg</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">npix_min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">npix_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">amax_thr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">atot_thr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">son_min</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="n">peaks</span> <span class="o">=</span> <span class="n">peaks_droplet_2d</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thr_low</span><span class="p">,</span> <span class="n">thr_high</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">r0</span><span class="o">=</span><span class="mf">7.0</span><span class="p">,</span> <span class="n">dr</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">seg</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">npix_min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">npix_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">amax_thr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">atot_thr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">son_min</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># data and mask are N-d numpy arrays or list of 2-d numpy arrays of the same shape    </span>
<span class="n">peaks</span> <span class="o">=</span> <span class="n">peaks_adaptive</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">r0</span><span class="o">=</span><span class="mf">7.0</span><span class="p">,</span> <span class="n">dr</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">nsigm</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">npix_min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">npix_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">amax_thr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">atot_thr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">son_min</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># data and mask are N-d numpy arrays or list of 2-d numpy arrays of the same shape    </span>
<span class="n">peaks</span> <span class="o">=</span> <span class="n">peaks_droplet</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thr_low</span><span class="p">,</span> <span class="n">thr_high</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">r0</span><span class="o">=</span><span class="mf">7.0</span><span class="p">,</span> <span class="n">dr</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">npix_min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">npix_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">amax_thr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">atot_thr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">son_min</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="n">peak_pars</span> <span class="o">=</span> <span class="n">list_of_peak_parameters</span><span class="p">(</span><span class="n">peaks</span><span class="p">)</span>


<span class="c1"># Backward compatability support for ImgAlgos.PyAlgos</span>
<span class="c1"># ===================================================</span>

<span class="c1"># import:</span>
<span class="kn">from</span> <span class="nn">psalgos.pypsalgos</span> <span class="k">import</span> <span class="n">PyAlgos</span> <span class="c1"># replacement for: from ImgAlgos.PyAlgos import PyAlgos</span>

<span class="c1"># create object:</span>
<span class="n">alg</span> <span class="o">=</span> <span class="n">PyAlgos</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># set peak-selector parameters:</span>
<span class="n">alg</span><span class="o">.</span><span class="n">set_peak_selection_pars</span><span class="p">(</span><span class="n">npix_min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">npix_max</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">amax_thr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">atot_thr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">son_min</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># call peakfinders ATTENTION TO REVISION NUMBER: use r3 in stead of r2</span>

<span class="c1"># v3 stands for &quot;ranker&quot; a.k.a. &quot;adaptive&quot;, r3 stands for revision </span>
<span class="n">peaks</span> <span class="o">=</span> <span class="n">alg</span><span class="o">.</span><span class="n">peak_finder_v3r3</span><span class="p">(</span><span class="n">nda</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">r0</span><span class="o">=</span><span class="mf">7.0</span><span class="p">,</span> <span class="n">dr</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">nsigm</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1">#, mask=...</span>

<span class="c1"># v4 stands for &quot;droplet&quot; a.k.a. &quot;two threshold&quot;, r3 stands for revision</span>
<span class="n">peaks</span> <span class="o">=</span> <span class="n">alg</span><span class="o">.</span><span class="n">peak_finder_v4r3</span><span class="p">(</span><span class="n">nda</span><span class="p">,</span> <span class="n">thr_low</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">thr_high</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">r0</span><span class="o">=</span><span class="mf">7.0</span><span class="p">,</span> <span class="n">dr</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span> <span class="c1">#, mask=...</span>

<span class="c1"># OPTIONAL for backward compatability</span>
<span class="c1"># set mask</span>
<span class="n">alg</span><span class="o">.</span><span class="n">set_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>

<span class="c1"># set parameters for S/N evaluation algorithm</span>
<span class="n">alg</span><span class="o">.</span><span class="n">set_son_pars</span><span class="p">(</span><span class="n">r0</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">dr</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># print info</span>
<span class="n">alg</span><span class="o">.</span><span class="n">print_attributes</span><span class="p">()</span> <span class="c1"># mask, r0, dr, peak selection parameters</span>
</pre></div>
</div>
<dl class="class">
<dt id="pypsalgos.PyAlgos">
<em class="property">class </em><code class="descclassname">pypsalgos.</code><code class="descname">PyAlgos</code><span class="sig-paren">(</span><em>windows=None</em>, <em>mask=None</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#PyAlgos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.PyAlgos" title="Permalink to this definition">¶</a></dt>
<dd><p>Backward compatability support for ImgAlgos.PyAlgos.</p>
<dl class="method">
<dt id="pypsalgos.PyAlgos.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>windows=None</em>, <em>mask=None</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#PyAlgos.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.PyAlgos.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameters
- windows - is not used.
- mask - numpy.array of the same shape as data or None.
- pbits - level of verbosity bitword: NONE=0, DEBUG=1, INFO=2, WARNING=4, ERROR=8, CRITICAL=16</p>
</dd></dl>

<dl class="method">
<dt id="pypsalgos.PyAlgos.peak_finder_v3r3">
<code class="descname">peak_finder_v3r3</code><span class="sig-paren">(</span><em>data</em>, <em>rank=5</em>, <em>r0=7</em>, <em>dr=2</em>, <em>nsigm=5</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#PyAlgos.peak_finder_v3r3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.PyAlgos.peak_finder_v3r3" title="Permalink to this definition">¶</a></dt>
<dd><p>runs “ranker” peakfinder and returns the list of peak parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>np.array</em>) – n-d numpy array or list of 2-d numpy arrays of data</li>
<li><strong>rank</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – radial size or the region [row-rank:row+rank, col-rank:col+rank] where central pixel is a local maximum</li>
<li><strong>r0</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – radius [in pixels] of the ring for background evaluation</li>
<li><strong>dr</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – width [in pixels] of the ring for background evaluation</li>
<li><strong>nsigm</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – threshold on intensity to include pixel in connected group in terms of number of sigma (rms) estimated for pixels in the ring defined by r0 and dr</li>
<li><strong>mask</strong> (<em>np.array</em>) – mask uint16 shaped as data</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list of tuple peak parameters (seg, row, col, npix, amp_max, amp_tot, row_cgrav, col_cgrav, row_sigma, col_sigma, row_min, row_max, col_min, col_max, bkgd, noise, son)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of tuples</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsalgos.PyAlgos.peak_finder_v4r3">
<code class="descname">peak_finder_v4r3</code><span class="sig-paren">(</span><em>data</em>, <em>thr_low=20</em>, <em>thr_high=50</em>, <em>rank=5</em>, <em>r0=7</em>, <em>dr=2</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#PyAlgos.peak_finder_v4r3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.PyAlgos.peak_finder_v4r3" title="Permalink to this definition">¶</a></dt>
<dd><p>runs “droplet-finder” and returns the list of peak parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>np.array</em>) – n-d numpy array or list of 2-d numpy arrays of data</li>
<li><strong>thr_low</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – low threshold [ADU] - used to include pixel in connected group and select pixels to estimate rms and mean in the ring</li>
<li><strong>thr_high</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – high threshold [ADU] - used to search for local maxima candidate</li>
<li><strong>rank</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – radial size or the region [row-rank, row+rank] where central pixel is a local maximum</li>
<li><strong>r0</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – radius [in pixels] of the ring for background evaluation</li>
<li><strong>dr</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – width [in pixels] of the ring for background evaluation</li>
<li><strong>mask</strong> (<em>np.array</em>) – mask uint16 shaped as data</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list of tuple peak parameters (seg, row, col, npix, amp_max, amp_tot, row_cgrav, col_cgrav, row_sigma, col_sigma, row_min, row_max, col_min, col_max, bkgd, noise, son)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of tuples</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsalgos.PyAlgos.set_peak_selection_pars">
<code class="descname">set_peak_selection_pars</code><span class="sig-paren">(</span><em>npix_min=1</em>, <em>npix_max=None</em>, <em>amax_thr=0</em>, <em>atot_thr=0</em>, <em>son_min=6</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#PyAlgos.set_peak_selection_pars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.PyAlgos.set_peak_selection_pars" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets peak selection parameters.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pypsalgos.list_of_peak_parameters">
<code class="descclassname">pypsalgos.</code><code class="descname">list_of_peak_parameters</code><span class="sig-paren">(</span><em>peaks</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#list_of_peak_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.list_of_peak_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts list of peak objects to the (old style) list of peak parameters.</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.local_maxima_1d">
<code class="descclassname">pypsalgos.</code><code class="descname">local_maxima_1d</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em>, <em>rank=3</em>, <em>extrema=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#local_maxima_1d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.local_maxima_1d" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds local maxima of specified rank in 1-d array of data with mask and returns results in array extrema.</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.local_maxima_2d">
<code class="descclassname">pypsalgos.</code><code class="descname">local_maxima_2d</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em>, <em>rank=3</em>, <em>extrema=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#local_maxima_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.local_maxima_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds local maxima of specified rank in 2-d array of data with mask and returns results in array extrema.</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.local_maxima_rank1_cross_2d">
<code class="descclassname">pypsalgos.</code><code class="descname">local_maxima_rank1_cross_2d</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em>, <em>extrema=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#local_maxima_rank1_cross_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.local_maxima_rank1_cross_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds local maxima rank=1 cross in 2-d array of data with mask and returns results in array extrema.</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.local_minima_1d">
<code class="descclassname">pypsalgos.</code><code class="descname">local_minima_1d</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em>, <em>rank=3</em>, <em>extrema=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#local_minima_1d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.local_minima_1d" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds local minima of specified rank in 1-d array of data with mask and returns results in array extrema.</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.local_minima_2d">
<code class="descclassname">pypsalgos.</code><code class="descname">local_minima_2d</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em>, <em>rank=3</em>, <em>extrema=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#local_minima_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.local_minima_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds local minima of specified rank in 2-d array of data with mask and returns results in array extrema.</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.peak_finder_alg_2d">
<code class="descclassname">pypsalgos.</code><code class="descname">peak_finder_alg_2d</code><span class="sig-paren">(</span><em>seg=0</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#peak_finder_alg_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.peak_finder_alg_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and returns algorithm object.</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.peaks_adaptive">
<code class="descclassname">pypsalgos.</code><code class="descname">peaks_adaptive</code><span class="sig-paren">(</span><em>data</em>, <em>mask</em>, <em>rank=5</em>, <em>r0=7.0</em>, <em>dr=2.0</em>, <em>nsigm=5</em>, <em>npix_min=1</em>, <em>npix_max=None</em>, <em>amax_thr=0</em>, <em>atot_thr=0</em>, <em>son_min=8</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#peaks_adaptive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.peaks_adaptive" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for liast of 2-d arrays or &gt;2-d arrays 
data and mask are N-d numpy arrays or list of 2-d numpy arrays of the same shape</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.peaks_adaptive_2d">
<code class="descclassname">pypsalgos.</code><code class="descname">peaks_adaptive_2d</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em>, <em>rank=5</em>, <em>r0=7.0</em>, <em>dr=2.0</em>, <em>nsigm=5</em>, <em>seg=0</em>, <em>npix_min=1</em>, <em>npix_max=None</em>, <em>amax_thr=0</em>, <em>atot_thr=0</em>, <em>son_min=8</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#peaks_adaptive_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.peaks_adaptive_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Peak finder for 2-d numpy arrays of data and mask of the same shape</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.peaks_droplet">
<code class="descclassname">pypsalgos.</code><code class="descname">peaks_droplet</code><span class="sig-paren">(</span><em>data</em>, <em>mask</em>, <em>thr_low</em>, <em>thr_high</em>, <em>rank=5</em>, <em>r0=7.0</em>, <em>dr=2.0</em>, <em>npix_min=1</em>, <em>npix_max=None</em>, <em>amax_thr=0</em>, <em>atot_thr=0</em>, <em>son_min=8</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#peaks_droplet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.peaks_droplet" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for liast of 2-d arrays or &gt;2-d arrays 
data and mask are N-d numpy arrays or list of 2-d numpy arrays of the same shape</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.peaks_droplet_2d">
<code class="descclassname">pypsalgos.</code><code class="descname">peaks_droplet_2d</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em>, <em>thr_low=None</em>, <em>thr_high=None</em>, <em>rank=5</em>, <em>r0=7.0</em>, <em>dr=2.0</em>, <em>seg=0</em>, <em>npix_min=1</em>, <em>npix_max=None</em>, <em>amax_thr=0</em>, <em>atot_thr=0</em>, <em>son_min=8</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#peaks_droplet_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.peaks_droplet_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>peak finder for 2-d numpy arrays of data and mask of the same shape</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.print_matrix_of_diag_indexes">
<code class="descclassname">pypsalgos.</code><code class="descname">print_matrix_of_diag_indexes</code><span class="sig-paren">(</span><em>rank=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#print_matrix_of_diag_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.print_matrix_of_diag_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints matrix of diagonal indexes for local_maxima_2d and local_minima_2d algorithms.</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.print_vector_of_diag_indexes">
<code class="descclassname">pypsalgos.</code><code class="descname">print_vector_of_diag_indexes</code><span class="sig-paren">(</span><em>rank=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#print_vector_of_diag_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.print_vector_of_diag_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints vector of diagonal indexes for local_maxima_2d and local_minima_2d algorithms.</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.reshape_to_2d">
<code class="descclassname">pypsalgos.</code><code class="descname">reshape_to_2d</code><span class="sig-paren">(</span><em>arr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#reshape_to_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.reshape_to_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns n-d re-shaped to 2-d</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.reshape_to_3d">
<code class="descclassname">pypsalgos.</code><code class="descname">reshape_to_3d</code><span class="sig-paren">(</span><em>arr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#reshape_to_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.reshape_to_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns n-d re-shaped to 3-d</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.shape_as_2d">
<code class="descclassname">pypsalgos.</code><code class="descname">shape_as_2d</code><span class="sig-paren">(</span><em>sh</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#shape_as_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.shape_as_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns 2-d shape for n-d shape if n&gt;2, otherwise returns unchanged shape.</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.shape_as_3d">
<code class="descclassname">pypsalgos.</code><code class="descname">shape_as_3d</code><span class="sig-paren">(</span><em>sh</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#shape_as_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.shape_as_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns 3-d shape for n-d shape if n&gt;3, otherwise returns unchanged shape.</p>
</dd></dl>

<dl class="function">
<dt id="pypsalgos.threshold_maxima_2d">
<code class="descclassname">pypsalgos.</code><code class="descname">threshold_maxima_2d</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em>, <em>rank=3</em>, <em>thr_low=None</em>, <em>thr_high=None</em>, <em>extrema=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypsalgos.html#threshold_maxima_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsalgos.threshold_maxima_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds local maxima using 2-threshold algorithm in 2-d array of data with mask and returns results in array extrema.</p>
</dd></dl>

<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
</tbody>
</table>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          
          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="py-modindex.html" title="Python Module Index"
              >modules</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/index.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Mikhail Dubrovin.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>